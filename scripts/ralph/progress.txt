## Codebase Patterns
- Frontend uses React + TypeScript with Vite
- API service pattern: Create service files in `services/` directory using `apiClient` from `api.ts`
- Type definitions go in `types/index.ts` with interfaces for all API requests/responses
- Page components go in `pages/` directory, imported and routed in `App.tsx`
- Navigation buttons added to `Dashboard.tsx` for main features
- CSS styling consolidated in `App.css` with section comments for each feature
- Use Tailwind CSS classes for layout, custom CSS for specific component styling
- Form validation handled inline with error state and error messages
- Modal pattern: overlay + container with header/content/actions sections
- Empty states should have call-to-action buttons when applicable
- Loading states use spinner component, disable buttons during submission
- Notification badges use absolute positioning with red background
- League invitations endpoint uses GET /api/v1/leagues/{league_id}/invitations (not /invitations/{league_id}/all)
- Status badges use colored backgrounds: yellow (pending), green (accepted), red (rejected), gray (expired)
- Responsive card layouts: stack on mobile, table-like grid on desktop using CSS grid
- Inviter info shows username when available, otherwise fallback to user_id

---

## 2/1/2026, 5:45 AM UTC - US-014
- **Story**: View League Invitations (Manager View) - View all invitations for a league
- **What was implemented**:
  - Created `LeagueInvitations.tsx` page component at `/leagues/:id/invitations`
  - Extended `invitationService.ts` with `getLeagueInvitations(leagueId)` method
  - Page displays all invitations sent for the league by any manager/co-manager
  - Each invitation shows: invitee info (email/username/user_id), inviter username, status badge, sent date
  - Status filter dropdown (All, Pending, Accepted, Rejected, Expired)
  - Info box showing which co-managers can send invitations
  - Mobile-responsive layout: cards on mobile, table-like header on desktop
  - Loading states, error handling, and empty state
  - Added "Manage Invitations" button in `LeagueDetail.tsx` (visible to creators/co-managers)
  - Added route in `App.tsx` for the new page
  - Comprehensive CSS styling for page, cards, status badges, filters
- **Files changed**:
  - `frontend/src/pages/LeagueInvitations.tsx` - New page component
  - `frontend/src/services/invitationService.ts` - Added getLeagueInvitations method
  - `frontend/src/App.tsx` - Added route /leagues/:id/invitations
  - `frontend/src/pages/LeagueDetail.tsx` - Added Manage Invitations button for creators/co-managers
  - `frontend/src/App.css` - Added comprehensive styling for league invitations page
- **Learnings for future iterations**:
  - League invitations endpoint is GET /api/v1/leagues/{league_id}/invitations (different from PRD spec)
  - The API response includes all invitations for the league regardless of who sent them
  - Shows inviter info including username and user_id to track which manager sent each invitation
  - Status badges use consistent color scheme across invitation pages
  - Responsive design: mobile shows stacked cards with labels, desktop shows grid layout with headers
  - Invitee info shows email if available, otherwise username or user_id
  - Empty state provides context about who can send invitations
  - Uses same invitation types as other invitation pages for consistency
- **Typecheck**: Passed with no errors
- **Commit**: `feat: US-014 - View Sent Invitations from League Page`
---

## 2/1/2026, 4:27 AM UTC - US-012 (FF-31)
- **Story**: View Received Invitations - Accept/Reject League Invitations
- **What was implemented**:
  - Added TypeScript types: `ReceivedInvitation`, `AcceptInvitationRequest`, `RejectInvitationRequest`
  - Extended `invitationService.ts` with 3 new methods:
    - `getReceivedInvitations()`: Fetches all received invitations
    - `acceptInvitation()`: Accepts invitation with team name
    - `rejectInvitation()`: Rejects invitation with optional reason
  - Created `ReceivedInvitations.tsx` page component with:
    - Invitation cards showing league name, inviter, message, time
    - Accept modal with team name input
    - Reject modal with optional reason input
    - Empty state with call-to-action buttons
    - Loading states and error handling
  - Added `/invitations` route in `App.tsx`
  - Added "Invitations" button to Dashboard with notification badge showing pending count
  - Added comprehensive CSS styling for invitations page, cards, modals, and empty state
- **Files changed**:
  - `frontend/src/types/index.ts` - Added invitation types
  - `frontend/src/services/invitationService.ts` - Added service methods
  - `frontend/src/pages/ReceivedInvitations.tsx` - New page component
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added nav button with badge
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - The invitation API uses `SentInvitation` type for the list response even for received invitations - this is a backend design choice
  - Dashboard badge fetches invitations on mount and filters for pending status
  - Modals use a consistent pattern: overlay, container, header, body, actions
  - Accept action requires team name (league join requirement)
  - Reject action has optional reason field
  - After accept/reject, the list refreshes automatically
  - TypeScript "unused import" errors are caught by `npm run build` (tsc -b)
---

## 2/1/2026, 3:34 AM UTC - US-011 (FF-30)
- **Story**: Send League Invitations - Invite Users via Multiple Methods
- **What was implemented**:
  - Created `SendInvitations.tsx` page component with 4 invitation methods (tabs)
  - Created `invitationService.ts` with API methods for all invitation types
  - Added invitation-related types to `types/index.ts`
  - Added route `/leagues/:id/invite` in `App.tsx`
  - Added "Invite Members" button to `LeagueDetail.tsx`
  - Added comprehensive CSS styling for invitations page
- **Files changed**:
  - `frontend/src/pages/SendInvitations.tsx` - New page
  - `frontend/src/services/invitationService.ts` - New service
  - `frontend/src/types/index.ts` - Added invitation types
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/LeagueDetail.tsx` - Added invite button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Tab pattern: state for active tab, conditional rendering of content
  - Each invitation type has different request body structure
  - Code invitations generate shareable codes to display
  - Pending invitations list shown at bottom with cancel option
  - Form validation: email format, required fields
  - Success/error messages displayed inline
  - After sending, form resets and pending list refreshes
---

## 1/31/2026, 11:19 PM UTC - US-010 (FF-29)
- **Story**: My Leagues Dashboard - View All My Leagues
- **What was implemented**:
  - Created `MyLeagues.tsx` page component with full functionality
  - Added `MyLeague` type to `types/index.ts`
  - Extended `leagueService.ts` with `getMyLeagues` method
  - Added route `/my-leagues` in `App.tsx`
  - Added "My Leagues" button to `Dashboard.tsx` navigation
  - Added comprehensive CSS styling for league cards, rank badges, empty states
- **Files changed**:
  - `frontend/src/pages/MyLeagues.tsx` - New page
  - `frontend/src/types/index.ts` - Added MyLeague type
  - `frontend/src/services/leagueService.ts` - Added getMyLeagues
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added nav button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - League cards use absolute positioning for rank badge (top-right corner)
  - Sort dropdown changes local state, useMemo for sorting logic
  - Empty state includes two call-to-action buttons (Create League, Join League)
  - League cards are clickable links to league detail page
  - Team info shown with border-left accent color
  - Rank badge uses gradient background for visual appeal
---

## 1/31/2026, 11:30 PM UTC - US-008 (FF-28)
- **Story**: Update League Settings - Edit League Configuration
- **What was implemented**:
  - Created EditLeague page component with form for all league settings
  - Extended leagueService with updateLeague method
  - Added route `/leagues/:id/edit` in App.tsx
  - Added Edit League button in LeagueDetail for creators/co-managers
  - Form pre-populates with current league data
  - Form validation for all editable fields
  - Success/error feedback after update
  - Comprehensive CSS styling
- **Files changed**:
  - `frontend/src/pages/EditLeague.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added updateLeague
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/LeagueDetail.tsx` - Added Edit League button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Edit form uses existing CreateLeagueRequest type (shared structure)
  - Loading state shows spinner while fetching league data
  - Form validation includes max teams range (2-50)
  - After successful update, user is redirected back to league detail
  - Error messages displayed in alert banner
  - Select dropdowns for draft_method and draft_close_condition enums
---

## 1/31/2026, 10:45 PM UTC - US-009 (FF-27)
- **Story**: Delete League - Remove League Permanently
- **What was implemented**:
  - Added deleteLeague service function in leagueService.ts
  - Added delete modal with confirmation in LeagueDetail.tsx
  - Requires typing league name to confirm deletion
  - Success message and redirect to dashboard after deletion
  - Error handling with user-friendly messages
- **Files changed**:
  - `frontend/src/services/leagueService.ts` - Added deleteLeague
  - `frontend/src/pages/LeagueDetail.tsx` - Added delete modal and logic
- **Learnings for future iterations**:
  - Delete confirmation pattern: modal with text input requiring league name
  - Warning banner with yellow background for destructive actions
  - Disable delete button during API call to prevent double-clicks
  - After deletion, navigate to dashboard (or leagues list)
  - Error handling catches 403 (not creator) and 404 (not found) errors
---

## 1/31/2026, 10:15 PM UTC - US-007 (FF-26)
- **Story**: Leave League - Withdraw from Competition
- **What was implemented**:
  - Added leaveLeague service function in leagueService.ts
  - Added Leave League button in LeagueDetail.tsx for members (not creator)
  - Confirmation dialog before leaving
  - Success message and redirect to dashboard
  - Error handling (403 for creator trying to leave)
- **Files changed**:
  - `frontend/src/services/leagueService.ts` - Added leaveLeague
  - `frontend/src/pages/LeagueDetail.tsx` - Added leave button and modal
- **Learnings for future iterations**:
  - Leave button only shown if user is member but NOT creator
  - Leave action requires confirmation (destructive action)
  - After leaving, redirect to dashboard (My Leagues page not yet implemented)
  - Team is deactivated on backend upon leaving
  - Button disabled during API call with "Leaving..." text
---

## 1/31/2026, 9:30 PM UTC - US-006 (FF-25)
- **Story**: Join League - Join via Code
- **What was implemented**:
  - Created JoinLeague page component
  - Extended leagueService with searchLeagueByCode and joinLeague methods
  - Added route `/leagues/join` in App.tsx
  - Added Join League button to Dashboard
  - Two-step flow: search by code, then enter team name and confirm
  - Form validation, loading states, error handling
- **Files changed**:
  - `frontend/src/pages/JoinLeague.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added methods
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added Join League button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Two-step join process: first validate code and show league info, then collect team name
  - League info box highlights league details before user commits
  - Team name is required (3-50 chars) to complete join
  - After joining, redirect to league detail page
  - Error handling for: invalid code, league full, already member
---

## 1/31/2026, 8:45 PM UTC - US-005 (FF-24)
- **Story**: League Details & Information
- **What was implemented**:
  - Created LeagueDetail page component
  - Extended leagueService with getLeagueMembers and getLeagueTeams
  - Display league info, members list, teams list
  - Role badges for members (Creator, Co-Manager, Member)
  - Conditional action buttons based on user's role
  - Join/Leave/Edit/Delete/Invite buttons with role checks
- **Files changed**:
  - `frontend/src/pages/LeagueDetail.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added methods
  - `frontend/src/types/index.ts` - Added Member and Team types
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Parallel data fetching with Promise.all for league, members, teams
  - Role-based conditional rendering: isCreator, isCoManager, isMember checks
  - Creator sees Edit, Delete, Invite buttons
  - Co-Manager sees Edit, Invite buttons
  - Member sees Leave button
  - Non-member sees Join button (if not full)
  - League code displayed prominently for sharing
  - Member count shown vs max teams
  - Role badges use different colors: yellow (creator), blue (co-manager), gray (member)
---

## 1/31/2026, 8:00 PM UTC - US-004 (FF-23)
- **Story**: League Creation
- **What was implemented**:
  - Created CreateLeague page and CreateLeagueForm component
  - Extended leagueService with createLeague method
  - Form validation for all fields including max teams range (2-50)
  - Success view showing league code after creation
  - Auto-redirect to league detail page after 3 seconds
- **Files changed**:
  - `frontend/src/components/CreateLeagueForm.tsx` - New component
  - `frontend/src/pages/CreateLeague.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added createLeague
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added Create League button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - League creation form has many fields: name, description, max_teams, is_public, draft_method, draft_close_condition, scoring settings
  - After creation, league code is displayed prominently (shareable)
  - Form uses controlled inputs with validation
  - Success state shows countdown before redirect
---

## 1/31/2026, 7:15 PM UTC - US-003 (FF-22)
- **Story**: League Discovery & Search
- **What was implemented**:
  - Created BrowseLeagues page with search and filter
  - Extended leagueService with getLeagues and searchLeagues
  - Implemented pagination, search bar, privacy filter
  - League cards with hover effects and click navigation
  - Empty state and loading state
- **Files changed**:
  - `frontend/src/pages/BrowseLeagues.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added methods
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Search is real-time (on every keystroke) with debounce
  - Pagination controls at bottom of list
  - League cards show: name, description, team count, max teams, privacy badge
  - Public/Private filter dropdown
  - Empty state when no results
  - Clicking card navigates to league detail
---

## 1/31/2026, 6:30 PM UTC - US-001 (FF-21)
- **Story**: User Registration & Authentication
- **What was implemented**:
  - Login and Register pages with forms
  - AuthContext for state management
  - ProtectedRoute component for authenticated routes
  - Dashboard page as post-login landing
  - Token storage in localStorage
- **Files changed**:
  - `frontend/src/pages/Login.tsx`
  - `frontend/src/pages/Register.tsx`
  - `frontend/src/context/AuthContext.tsx`
  - `frontend/src/components/ProtectedRoute.tsx`
  - `frontend/src/pages/Dashboard.tsx`
  - `frontend/src/App.tsx`
- **Learnings for future iterations**:
  - AuthContext provides user, login, register, logout functions
  - ProtectedRoute redirects to login if not authenticated
  - Token stored in localStorage, included in API calls via axios interceptor
  - Password validation: 8+ chars, 1 uppercase, 1 lowercase, 1 digit
  - Login redirects to dashboard, authenticated users redirect away from login
## 2026-02-01 05:35 UTC - US-013
- **Story:** Manage Sent Invitations - Implemented complete page for users to view and manage invitations they've sent to other users
- **Files changed:**
  - `frontend/src/services/invitationService.ts` - Added `getSentInvitations(status?)` method to fetch sent invitations with optional status filter
  - `frontend/src/pages/SentInvitations.tsx` - Created new page component with:
    - Invitations list with cards showing invitee info, league link, status badge with icons
    - Status filter dropdown (All, Pending, Accepted, Rejected, Expired) with counts
    - Cancel button for pending invitations with confirmation modal
    - Explanation text for non-pending statuses
    - Empty state with links to Browse Leagues and My Leagues
    - Responsive design with loading and error states
  - `frontend/src/App.tsx` - Added route `/sent-invitations` for new page
  - `frontend/src/pages/Dashboard.tsx` - Added "Sent Invitations" navigation button (cyan color)
- **Learnings for future iterations:**
  - Pattern: Use `InvitationStatus` type alias for filter values with proper union type: `'all' | 'pending' | 'accepted' | 'rejected' | 'expired'`
  - Pattern: Cards can have dynamic CSS classes based on status using template strings: `className={\`invitation-card \${getStatusColor(status)}\`}`
  - Pattern: The relative time display function uses time differences to show user-friendly strings like "5m ago", "2h ago"
  - Pattern: Service method with optional query params should use an empty object pattern to conditionally add params
  - Pattern: Non-pending invitations show contextual status text explaining what happened to the invitation
  - The `invite_code` field is displayed for code-based invitations if present
  - Same modal patterns as other pages: overlay click to close, stopPropagation on container

---

## 2/1/2026, 5:59 AM UTC - US-015
- **Story**: Manage League Roles - Promote/Demote Members to Co-Managers
- **What was implemented**:
  - Created `leagueRoleService.ts` with 3 API methods:
    - `getLeagueRoles(leagueId)`: Fetches all members with their roles
    - `promoteMember(leagueId, userId)`: Promotes member to co-manager
    - `demoteMember(leagueId, userId)`: Demotes co-manager to member
  - Created `LeagueRoles.tsx` page component at `/leagues/:id/roles` with:
    - Member cards showing username, full name, joined date, current role badge
    - Promote button for regular members (creator only)
    - Demote button for co-managers (creator only)
    - Creator role locked with "League Creator" badge
    - Confirmation modals for promote/demote actions with warning messages
    - Loading states, error handling, and success messages
    - Empty state when no members found
  - Added "Manage Roles" button in `LeagueDetail.tsx` (visible to creators only)
  - Added route `/leagues/:id/roles` in `App.tsx`
  - Comprehensive CSS styling for page, member cards, role badges, avatars, and modals
- **Files changed**:
  - `frontend/src/services/leagueRoleService.ts` - New service file
  - `frontend/src/pages/LeagueRoles.tsx` - New page component
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/LeagueDetail.tsx` - Added Manage Roles button for creators
  - `frontend/src/App.css` - Added styling for league roles page
- **Learnings for future iterations**:
  - League roles API uses GET /api/v1/league-roles/{league_id}/roles to fetch members with roles
  - Promote/demote endpoints use PUT with user_id in path: /api/v1/league-roles/{league_id}/promote/{user_id}
  - Role badges use different colors: gold (creator), blue (co-manager), gray (member)
  - Creator role is immutable - no action buttons shown for creator
  - Only creator can promote/demote members - button visibility based on isCreator check
  - Confirmation modals include warning messages about permissions changes
  - After successful promote/demote, the member list refreshes automatically
  - Member cards use avatar with initials (first letter of username) for visual appeal
  - Joined date formatted as "Joined {relative time}" for user-friendly display
- **Typecheck**: Passed with no errors
- **Commit**: `feat: US-015 - Add League Roles Management page`
---

## 2/1/2026, 6:06 AM UTC - US-016
- **Story**: My Teams Overview - View All My Fantasy Teams
- **What was implemented**:
  - Created `teamService.ts` with `getMyTeams()` method using GET /api/v1/teams/my-teams
  - Added `MyTeam` type to `types/index.ts` with fields: id, name, league_id, league_name, total_points, budget_remaining, is_active
  - Created `MyTeams.tsx` page component at `/my-teams` with:
    - Team cards showing team name, league name, total points, budget remaining, and status badge
    - Sort options: by points (descending), by league name (alphabetical), alphabetically (team name)
    - Empty state with call-to-action to join a league
    - Loading states and error handling
    - Responsive grid layout for team cards
  - Added route `/my-teams` in `App.tsx`
  - Added "My Teams" button to `Dashboard.tsx` navigation (orange color)
  - Comprehensive CSS styling for page, cards, stats, status badges, and empty states
- **Files changed**:
  - `frontend/src/services/teamService.ts` - New service file
  - `frontend/src/types/index.ts` - Added MyTeam type
  - `frontend/src/pages/MyTeams.tsx` - New page component
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added My Teams button
  - `frontend/src/App.css` - Added styling for my teams page
- **Learnings for future iterations**:
  - Team service follows same pattern as other services: apiClient, typed request/response
  - Team cards display key stats in a 2-column grid: total points and budget remaining
  - Points display uses color coding: green (high), amber (medium), gray (low/zero)
  - Budget display uses blue color for visual distinction
  - Status badge shows "Active" or "Inactive" with appropriate colors
  - Sort dropdown uses local state with useMemo for efficient sorting
  - Empty state provides clear call-to-action to join a league
  - Team cards are clickable links (placeholder for team detail page - US-017)
  - League info section uses border-left accent color for visual hierarchy
- **Typecheck**: Passed with no errors (npm run build)
- **Commit**: `feat: US-016 - Add My Teams Overview page`
---

## 2/1/2026, 6:20 AM UTC - US-017 & US-018
- **Story**: Team Detail & Roster Management + Update Team Name
- **What was implemented**:
  - Created `TeamDetail.tsx` page component at `/teams/:id` with:
    - Team info header showing name, league name, total points, budget remaining
    - Edit Team Name button with modal for updating team name
    - Delete Team button with confirmation modal
    - Team roster organized by race with visual indicators (upcoming/ongoing/completed)
    - Driver cards for each pick showing name, number, team, price, points earned
    - Empty state when no picks exist
    - Loading states, error handling, and success messages
  - Extended `teamService.ts` with 4 new methods:
    - `getTeamDetail(teamId)`: Fetches team details
    - `getTeamPicks(teamId)`: Fetches team picks organized by race
    - `updateTeamName(teamId, name)`: Updates team name
    - `deleteTeam(teamId)`: Deletes team
  - Added TypeScript types: `TeamDetail`, `TeamPick`, `DriverStats`
  - Added route `/teams/:id` in `App.tsx` (imported as `TeamDetailPage`)
  - `MyTeams.tsx` already links to team detail page via team cards
  - Comprehensive CSS styling for page, team info, driver cards, modals, and empty states
- **Files changed**:
  - `frontend/src/pages/TeamDetail.tsx` - New page component
  - `frontend/src/services/teamService.ts` - Added 4 new methods
  - `frontend/src/types/index.ts` - Added TeamDetail, TeamPick, DriverStats types
  - `frontend/src/App.tsx` - Added route /teams/:id
  - `frontend/src/App.css` - Added styling for team detail page
- **Learnings for future iterations**:
  - Team detail page combines US-017 and US-018 functionality in a single component
  - Team picks are organized by race with race status indicators (upcoming/ongoing/completed)
  - Race status badges use different colors: green (upcoming), yellow (ongoing), gray (completed)
  - Driver cards display key stats in a grid layout: name, number, team, price, points
  - Edit team name modal uses inline validation (3-100 characters) with error messages
  - Delete team modal requires confirmation with warning message
  - After successful name update, team info refreshes automatically
  - After successful deletion, user is redirected to My Teams page
  - Empty state provides context about adding picks for upcoming races
  - Team detail page is accessible from My Teams page via clickable team cards
  - Points display uses color coding: green (positive), gray (zero)
  - Budget display uses blue color for visual distinction
- **Typecheck**: Passed with no errors (npm run build)
- **Commit**: `feat: team-detail-page - Add team detail page with full CRUD functionality`

---

## 2/1/2026, 6:34 AM UTC - US-019
- **Story**: Add Team Picks - Select Drivers for Team for Each Race
- **What was implemented**:
  - Created `AddPicks.tsx` page component at `/teams/:teamId/add-picks/:raceId` with:
    - Driver cards showing name, number, team, country, price, total points, average points
    - Team filter dropdown to filter drivers by constructor
    - Search input to filter drivers by name, code, or number
    - Budget display showing total budget, remaining budget, and selected cost with progress bar
    - Selection summary showing drivers selected count and max per team limit
    - Max per team validation (2 drivers per team) with visual indicators
    - Max drivers validation (5 total drivers) with visual indicators
    - Budget validation preventing selection that exceeds remaining budget
    - Error messages for all validation failures
    - Success message with redirect to team detail after adding picks
    - Loading states, error handling, and empty states
    - Responsive grid layout for driver cards
  - Extended `teamService.ts` with 2 new methods:
    - `addTeamPick(teamId, request)`: Adds picks for a team using POST /api/v1/teams/{team_id}/picks
    - `getAvailableDrivers()`: Fetches all available drivers using GET /api/v1/drivers
  - Added TypeScript types: `AddPickRequest`, `AvailableDriver`, `LeaguePickLimits`
  - Added route `/teams/:teamId/add-picks/:raceId` in `App.tsx`
  - Added "Add Picks" button in `TeamDetail.tsx` for upcoming races
  - Comprehensive CSS styling for page, driver cards, budget display, filters, and validation messages
- **Files changed**:
  - `frontend/src/pages/AddPicks.tsx` - New page component
  - `frontend/src/services/teamService.ts` - Added addTeamPick and getAvailableDrivers methods
  - `frontend/src/types/index.ts` - Added AddPickRequest, AvailableDriver, LeaguePickLimits types
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/TeamDetail.tsx` - Added Add Picks button for upcoming races
  - `frontend/src/App.css` - Added styling for add picks page
- **Learnings for future iterations**:
  - Add Picks page uses teamId and raceId from URL params to identify team and race
  - Driver cards use checkbox for selection with visual feedback (selected state)
  - Team filter dropdown uses useMemo to extract unique teams from drivers list
  - Search filters by name, code, or number using case-insensitive matching
  - Budget display shows total budget, remaining budget, and selected cost with color coding
  - Budget bar visualizes spending as percentage of total budget
  - Selection errors are calculated using useMemo for efficient validation
  - Max per team validation tracks count per team and disables selection when limit reached
  - Driver cards show warning when max per team limit reached for that team
  - Submit button is disabled when selection is invalid or no drivers selected
  - After successful submission, success message shows and redirects after 2 seconds
  - Existing picks for the race are checked and error shown if picks already exist
  - Team detail page shows "Add Picks" button only for upcoming races (not completed races)
  - Driver cards display stats in a grid: price, total points, average points
  - Empty state shows when no drivers match filters with clear filters button
- **Typecheck**: Passed with no errors (npm run build)
- **Commit**: `feat: US-019 - Add Picks Page`

---

## 2/1/2026, 6:43 AM UTC - US-020
- **Story**: Remove Team Picks - Remove Drivers from Lineup
- **What was implemented**:
  - Extended `teamService.ts` with `removePick(teamId, pickId)` method using DELETE /api/v1/teams/{team_id}/picks/{pick_id}
  - Updated `TeamDetail.tsx` with:
    - Remove Pick button on driver cards for upcoming races only
    - Confirmation modal showing pick details (race, driver, team, price)
    - Info banner explaining budget refund after removal
    - Success message after removal with team data refresh
    - Loading states, error handling, and validation
  - Added comprehensive CSS styling for:
    - Pick details section in modal with detail rows
    - Info banner with blue background and icon
    - Remove Pick button styling
  - Remove Pick button only shown for upcoming races (not ongoing or completed)
  - Modal displays full pick information before confirmation
  - After successful removal, team data refreshes automatically
- **Files changed**:
  - `frontend/src/services/teamService.ts` - Added removePick method
  - `frontend/src/pages/TeamDetail.tsx` - Added Remove Pick button and modal
  - `frontend/src/App.css` - Added styling for pick details and info banner
- **Learnings for future iterations**:
  - Remove Pick button only shown for upcoming races (race.status === 'upcoming')
  - Modal pattern: overlay + container with header (title + close button), body (description + details + info banner), actions (cancel + confirm buttons)
  - Pick details section uses detail-row pattern with label and value columns
  - Info banner uses blue background (#eff6ff) with border (#bfdbfe) for informational content
  - After successful removal, team data refreshes by calling fetchTeamData() to update budget and picks
  - Error handling catches 403 (race started/deadline passed) and 404 (pick not found) errors
  - Success message shows "Pick removed successfully" and auto-dismisses after 3 seconds
  - Remove Pick button uses btn-danger styling (red background) for destructive action
  - Modal uses same overlay pattern as other modals (click outside to close, stopPropagation on container)
  - Pick details show: race name, driver name, driver team, and price for user confirmation
- **Typecheck**: Passed with no errors (npm run build)
- **Commit**: `feat: US-020 - Remove Team Picks`
---
