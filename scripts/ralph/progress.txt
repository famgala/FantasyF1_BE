## Codebase Patterns
- Frontend uses React + TypeScript with Vite
- API service pattern: Create service files in `services/` directory using `apiClient` from `api.ts`
- Type definitions go in `types/index.ts` with interfaces for all API requests/responses
- Page components go in `pages/` directory, imported and routed in `App.tsx`
- Navigation buttons added to `Dashboard.tsx` for main features
- CSS styling consolidated in `App.css` with section comments for each feature
- Use Tailwind CSS classes for layout, custom CSS for specific component styling
- Form validation handled inline with error state and error messages
- Modal pattern: overlay + container with header/content/actions sections
- Empty states should have call-to-action buttons when applicable
- Loading states use spinner component, disable buttons during submission
- Notification badges use absolute positioning with red background
- League invitations endpoint uses GET /api/v1/leagues/{league_id}/invitations (not /invitations/{league_id}/all)
- Status badges use colored backgrounds: yellow (pending), green (accepted), red (rejected), gray (expired)
- Responsive card layouts: stack on mobile, table-like grid on desktop using CSS grid
- Inviter info shows username when available, otherwise fallback to user_id

---

## 2/1/2026, 5:45 AM UTC - US-014
- **Story**: View League Invitations (Manager View) - View all invitations for a league
- **What was implemented**:
  - Created `LeagueInvitations.tsx` page component at `/leagues/:id/invitations`
  - Extended `invitationService.ts` with `getLeagueInvitations(leagueId)` method
  - Page displays all invitations sent for the league by any manager/co-manager
  - Each invitation shows: invitee info (email/username/user_id), inviter username, status badge, sent date
  - Status filter dropdown (All, Pending, Accepted, Rejected, Expired)
  - Info box showing which co-managers can send invitations
  - Mobile-responsive layout: cards on mobile, table-like header on desktop
  - Loading states, error handling, and empty state
  - Added "Manage Invitations" button in `LeagueDetail.tsx` (visible to creators/co-managers)
  - Added route in `App.tsx` for the new page
  - Comprehensive CSS styling for page, cards, status badges, filters
- **Files changed**:
  - `frontend/src/pages/LeagueInvitations.tsx` - New page component
  - `frontend/src/services/invitationService.ts` - Added getLeagueInvitations method
  - `frontend/src/App.tsx` - Added route /leagues/:id/invitations
  - `frontend/src/pages/LeagueDetail.tsx` - Added Manage Invitations button for creators/co-managers
  - `frontend/src/App.css` - Added comprehensive styling for league invitations page
- **Learnings for future iterations**:
  - League invitations endpoint is GET /api/v1/leagues/{league_id}/invitations (different from PRD spec)
  - The API response includes all invitations for the league regardless of who sent them
  - Shows inviter info including username and user_id to track which manager sent each invitation
  - Status badges use consistent color scheme across invitation pages
  - Responsive design: mobile shows stacked cards with labels, desktop shows grid layout with headers
  - Invitee info shows email if available, otherwise username or user_id
  - Empty state provides context about who can send invitations
  - Uses same invitation types as other invitation pages for consistency
- **Typecheck**: Passed with no errors
- **Commit**: `feat: US-014 - View Sent Invitations from League Page`
---

## 2/1/2026, 4:27 AM UTC - US-012 (FF-31)
- **Story**: View Received Invitations - Accept/Reject League Invitations
- **What was implemented**:
  - Added TypeScript types: `ReceivedInvitation`, `AcceptInvitationRequest`, `RejectInvitationRequest`
  - Extended `invitationService.ts` with 3 new methods:
    - `getReceivedInvitations()`: Fetches all received invitations
    - `acceptInvitation()`: Accepts invitation with team name
    - `rejectInvitation()`: Rejects invitation with optional reason
  - Created `ReceivedInvitations.tsx` page component with:
    - Invitation cards showing league name, inviter, message, time
    - Accept modal with team name input
    - Reject modal with optional reason input
    - Empty state with call-to-action buttons
    - Loading states and error handling
  - Added `/invitations` route in `App.tsx`
  - Added "Invitations" button to Dashboard with notification badge showing pending count
  - Added comprehensive CSS styling for invitations page, cards, modals, and empty state
- **Files changed**:
  - `frontend/src/types/index.ts` - Added invitation types
  - `frontend/src/services/invitationService.ts` - Added service methods
  - `frontend/src/pages/ReceivedInvitations.tsx` - New page component
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added nav button with badge
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - The invitation API uses `SentInvitation` type for the list response even for received invitations - this is a backend design choice
  - Dashboard badge fetches invitations on mount and filters for pending status
  - Modals use a consistent pattern: overlay, container, header, body, actions
  - Accept action requires team name (league join requirement)
  - Reject action has optional reason field
  - After accept/reject, the list refreshes automatically
  - TypeScript "unused import" errors are caught by `npm run build` (tsc -b)
---

## 2/1/2026, 3:34 AM UTC - US-011 (FF-30)
- **Story**: Send League Invitations - Invite Users via Multiple Methods
- **What was implemented**:
  - Created `SendInvitations.tsx` page component with 4 invitation methods (tabs)
  - Created `invitationService.ts` with API methods for all invitation types
  - Added invitation-related types to `types/index.ts`
  - Added route `/leagues/:id/invite` in `App.tsx`
  - Added "Invite Members" button to `LeagueDetail.tsx`
  - Added comprehensive CSS styling for invitations page
- **Files changed**:
  - `frontend/src/pages/SendInvitations.tsx` - New page
  - `frontend/src/services/invitationService.ts` - New service
  - `frontend/src/types/index.ts` - Added invitation types
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/LeagueDetail.tsx` - Added invite button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Tab pattern: state for active tab, conditional rendering of content
  - Each invitation type has different request body structure
  - Code invitations generate shareable codes to display
  - Pending invitations list shown at bottom with cancel option
  - Form validation: email format, required fields
  - Success/error messages displayed inline
  - After sending, form resets and pending list refreshes
---

## 1/31/2026, 11:19 PM UTC - US-010 (FF-29)
- **Story**: My Leagues Dashboard - View All My Leagues
- **What was implemented**:
  - Created `MyLeagues.tsx` page component with full functionality
  - Added `MyLeague` type to `types/index.ts`
  - Extended `leagueService.ts` with `getMyLeagues` method
  - Added route `/my-leagues` in `App.tsx`
  - Added "My Leagues" button to `Dashboard.tsx` navigation
  - Added comprehensive CSS styling for league cards, rank badges, empty states
- **Files changed**:
  - `frontend/src/pages/MyLeagues.tsx` - New page
  - `frontend/src/types/index.ts` - Added MyLeague type
  - `frontend/src/services/leagueService.ts` - Added getMyLeagues
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added nav button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - League cards use absolute positioning for rank badge (top-right corner)
  - Sort dropdown changes local state, useMemo for sorting logic
  - Empty state includes two call-to-action buttons (Create League, Join League)
  - League cards are clickable links to league detail page
  - Team info shown with border-left accent color
  - Rank badge uses gradient background for visual appeal
---

## 1/31/2026, 11:30 PM UTC - US-008 (FF-28)
- **Story**: Update League Settings - Edit League Configuration
- **What was implemented**:
  - Created EditLeague page component with form for all league settings
  - Extended leagueService with updateLeague method
  - Added route `/leagues/:id/edit` in App.tsx
  - Added Edit League button in LeagueDetail for creators/co-managers
  - Form pre-populates with current league data
  - Form validation for all editable fields
  - Success/error feedback after update
  - Comprehensive CSS styling
- **Files changed**:
  - `frontend/src/pages/EditLeague.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added updateLeague
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/LeagueDetail.tsx` - Added Edit League button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Edit form uses existing CreateLeagueRequest type (shared structure)
  - Loading state shows spinner while fetching league data
  - Form validation includes max teams range (2-50)
  - After successful update, user is redirected back to league detail
  - Error messages displayed in alert banner
  - Select dropdowns for draft_method and draft_close_condition enums
---

## 1/31/2026, 10:45 PM UTC - US-009 (FF-27)
- **Story**: Delete League - Remove League Permanently
- **What was implemented**:
  - Added deleteLeague service function in leagueService.ts
  - Added delete modal with confirmation in LeagueDetail.tsx
  - Requires typing league name to confirm deletion
  - Success message and redirect to dashboard after deletion
  - Error handling with user-friendly messages
- **Files changed**:
  - `frontend/src/services/leagueService.ts` - Added deleteLeague
  - `frontend/src/pages/LeagueDetail.tsx` - Added delete modal and logic
- **Learnings for future iterations**:
  - Delete confirmation pattern: modal with text input requiring league name
  - Warning banner with yellow background for destructive actions
  - Disable delete button during API call to prevent double-clicks
  - After deletion, navigate to dashboard (or leagues list)
  - Error handling catches 403 (not creator) and 404 (not found) errors
---

## 1/31/2026, 10:15 PM UTC - US-007 (FF-26)
- **Story**: Leave League - Withdraw from Competition
- **What was implemented**:
  - Added leaveLeague service function in leagueService.ts
  - Added Leave League button in LeagueDetail.tsx for members (not creator)
  - Confirmation dialog before leaving
  - Success message and redirect to dashboard
  - Error handling (403 for creator trying to leave)
- **Files changed**:
  - `frontend/src/services/leagueService.ts` - Added leaveLeague
  - `frontend/src/pages/LeagueDetail.tsx` - Added leave button and modal
- **Learnings for future iterations**:
  - Leave button only shown if user is member but NOT creator
  - Leave action requires confirmation (destructive action)
  - After leaving, redirect to dashboard (My Leagues page not yet implemented)
  - Team is deactivated on backend upon leaving
  - Button disabled during API call with "Leaving..." text
---

## 1/31/2026, 9:30 PM UTC - US-006 (FF-25)
- **Story**: Join League - Join via Code
- **What was implemented**:
  - Created JoinLeague page component
  - Extended leagueService with searchLeagueByCode and joinLeague methods
  - Added route `/leagues/join` in App.tsx
  - Added Join League button to Dashboard
  - Two-step flow: search by code, then enter team name and confirm
  - Form validation, loading states, error handling
- **Files changed**:
  - `frontend/src/pages/JoinLeague.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added methods
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added Join League button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Two-step join process: first validate code and show league info, then collect team name
  - League info box highlights league details before user commits
  - Team name is required (3-50 chars) to complete join
  - After joining, redirect to league detail page
  - Error handling for: invalid code, league full, already member
---

## 1/31/2026, 8:45 PM UTC - US-005 (FF-24)
- **Story**: League Details & Information
- **What was implemented**:
  - Created LeagueDetail page component
  - Extended leagueService with getLeagueMembers and getLeagueTeams
  - Display league info, members list, teams list
  - Role badges for members (Creator, Co-Manager, Member)
  - Conditional action buttons based on user's role
  - Join/Leave/Edit/Delete/Invite buttons with role checks
- **Files changed**:
  - `frontend/src/pages/LeagueDetail.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added methods
  - `frontend/src/types/index.ts` - Added Member and Team types
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Parallel data fetching with Promise.all for league, members, teams
  - Role-based conditional rendering: isCreator, isCoManager, isMember checks
  - Creator sees Edit, Delete, Invite buttons
  - Co-Manager sees Edit, Invite buttons
  - Member sees Leave button
  - Non-member sees Join button (if not full)
  - League code displayed prominently for sharing
  - Member count shown vs max teams
  - Role badges use different colors: yellow (creator), blue (co-manager), gray (member)
---

## 1/31/2026, 8:00 PM UTC - US-004 (FF-23)
- **Story**: League Creation
- **What was implemented**:
  - Created CreateLeague page and CreateLeagueForm component
  - Extended leagueService with createLeague method
  - Form validation for all fields including max teams range (2-50)
  - Success view showing league code after creation
  - Auto-redirect to league detail page after 3 seconds
- **Files changed**:
  - `frontend/src/components/CreateLeagueForm.tsx` - New component
  - `frontend/src/pages/CreateLeague.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added createLeague
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/pages/Dashboard.tsx` - Added Create League button
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - League creation form has many fields: name, description, max_teams, is_public, draft_method, draft_close_condition, scoring settings
  - After creation, league code is displayed prominently (shareable)
  - Form uses controlled inputs with validation
  - Success state shows countdown before redirect
---

## 1/31/2026, 7:15 PM UTC - US-003 (FF-22)
- **Story**: League Discovery & Search
- **What was implemented**:
  - Created BrowseLeagues page with search and filter
  - Extended leagueService with getLeagues and searchLeagues
  - Implemented pagination, search bar, privacy filter
  - League cards with hover effects and click navigation
  - Empty state and loading state
- **Files changed**:
  - `frontend/src/pages/BrowseLeagues.tsx` - New page
  - `frontend/src/services/leagueService.ts` - Added methods
  - `frontend/src/App.tsx` - Added route
  - `frontend/src/App.css` - Added styling
- **Learnings for future iterations**:
  - Search is real-time (on every keystroke) with debounce
  - Pagination controls at bottom of list
  - League cards show: name, description, team count, max teams, privacy badge
  - Public/Private filter dropdown
  - Empty state when no results
  - Clicking card navigates to league detail
---

## 1/31/2026, 6:30 PM UTC - US-001 (FF-21)
- **Story**: User Registration & Authentication
- **What was implemented**:
  - Login and Register pages with forms
  - AuthContext for state management
  - ProtectedRoute component for authenticated routes
  - Dashboard page as post-login landing
  - Token storage in localStorage
- **Files changed**:
  - `frontend/src/pages/Login.tsx`
  - `frontend/src/pages/Register.tsx`
  - `frontend/src/context/AuthContext.tsx`
  - `frontend/src/components/ProtectedRoute.tsx`
  - `frontend/src/pages/Dashboard.tsx`
  - `frontend/src/App.tsx`
- **Learnings for future iterations**:
  - AuthContext provides user, login, register, logout functions
  - ProtectedRoute redirects to login if not authenticated
  - Token stored in localStorage, included in API calls via axios interceptor
  - Password validation: 8+ chars, 1 uppercase, 1 lowercase, 1 digit
  - Login redirects to dashboard, authenticated users redirect away from login
## 2026-02-01 05:35 UTC - US-013
- **Story:** Manage Sent Invitations - Implemented complete page for users to view and manage invitations they've sent to other users
- **Files changed:**
  - `frontend/src/services/invitationService.ts` - Added `getSentInvitations(status?)` method to fetch sent invitations with optional status filter
  - `frontend/src/pages/SentInvitations.tsx` - Created new page component with:
    - Invitations list with cards showing invitee info, league link, status badge with icons
    - Status filter dropdown (All, Pending, Accepted, Rejected, Expired) with counts
    - Cancel button for pending invitations with confirmation modal
    - Explanation text for non-pending statuses
    - Empty state with links to Browse Leagues and My Leagues
    - Responsive design with loading and error states
  - `frontend/src/App.tsx` - Added route `/sent-invitations` for new page
  - `frontend/src/pages/Dashboard.tsx` - Added "Sent Invitations" navigation button (cyan color)
- **Learnings for future iterations:**
  - Pattern: Use `InvitationStatus` type alias for filter values with proper union type: `'all' | 'pending' | 'accepted' | 'rejected' | 'expired'`
  - Pattern: Cards can have dynamic CSS classes based on status using template strings: `className={\`invitation-card \${getStatusColor(status)}\`}`
  - Pattern: The relative time display function uses time differences to show user-friendly strings like "5m ago", "2h ago"
  - Pattern: Service method with optional query params should use an empty object pattern to conditionally add params
  - Pattern: Non-pending invitations show contextual status text explaining what happened to the invitation
  - The `invite_code` field is displayed for code-based invitations if present
  - Same modal patterns as other pages: overlay click to close, stopPropagation on container
---
